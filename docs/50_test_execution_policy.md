# テスト実行方針 - チケット管理アプリ

- 文書ID：TXP-TICKET-001
- 版：v0.2
- ステータス：Draft
- 最終更新日：2026-01-19
- 作成者：仁後慎太郎
- 対象：チケット管理アプリ（Web, Django + SQLite）
- 関連：
  - テスト計画：`../docs/10_test_plan.md`
  - テストケース：`../testcases/testcases.csv`
  - テスト結果：`../results/test_results.csv`
  - 欠陥ログ：`../defects/defect_log.csv`

---

## 1. 目的

本ドキュメントは、テストの実行手順・判定基準・記録方法を統一し、結果の比較可能性と再現性を確保することを目的とする。

---

## 2. テスト対象アプリの特定

本リポジトリ（QA成果物）は、別リポジトリで管理するアプリ実装を対象にテストを実施する。  
テスト結果・欠陥は **「どのアプリ版（コミット/タグ）」に対するものか** を必ず記録し、再現性を担保する。

- 対象アプリの版管理：
  - 原則：タグ（例：`app-v0.3`）またはコミットSHAで固定する
  - テスト結果CSVの「ビルド」列には、タグ名またはコミットSHAを記録する

---

## 3. 実行単位と記録先

- テストケースは **設計情報として管理**し実行列は持たない
  - 置き場所：`../testcases/testcases.csv`
  - 記録粒度：**1ケース＝1行**
- テスト結果は **履歴を蓄積**し再実行は新しい行として追記
  - 置き場所：`../results/test_results.csv`
  - 記録粒度：**1実行＝1行**
- 欠陥ログは **欠陥単位で管理**し欠陥IDはテスト結果と紐付ける
  - 置き場所：`../defects/defect_log.csv`
  - 記録粒度：**1欠陥＝1行**

---

## 4. 実行方針

各テストの実行方針は以下の通り。

### 4.1 実行順序（優先度）
- 原則：P1 → P2 の順に実行する
- P1で重大な欠陥が見つかった場合、関連領域のテストを優先して実行する（探索的に広げる）

## 4.2 実行結果（判定）
実行記録の「実行結果」は以下のいずれかで記録する。
- 合格：期待値どおり
- 不合格：期待値と差異がある
- 実行不可：前提未達（仕様未確定、環境不備、テストデータ不足等）
- 未実施：未実行（※運用上必要な場合のみ）

### 4.3 不合格時の扱い（欠陥管理）
- 不合格の場合、実行記録に欠陥IDを記入する（例：DEFECT-001）
- 欠陥ログに同じ欠陥IDで1行追加し、再現・期待/実際・重要度/優先度・証跡を簡潔に記録する
- 複雑な欠陥は「詳細リンク」に追加資料（Notionやmd等）を任意で紐づける

### 4.4 再実行（リテスト）
- 修正後は、該当テストケースを再実行し、実行記録に新しい行として追記する
- 必要に応じて関連領域の回帰テストを実施する（影響が疑われる範囲）

### 4.5 証跡の基準（目安）
- 不合格：原則、証跡を残す（スクショまたは短い動画）
- 合格：重要ケース（P1）は必要に応じてスクショを残す
- 実行不可：理由が分かるメモや画面を残す（可能なら）

---

## 5. 記録値・書式の統一ルール

本プロジェクトで使用する「状態」「種別」「重要度/優先度」等の値は、本章で定義したものに統一する。

### 5.1 欠陥の状態（defect_log.csv）
欠陥ログの「状態」は以下のいずれかで記録する。

| 状態 | 意味 | 更新タイミング（例） |
| --- | --- | --- |
| 新規 | 欠陥として起票した状態（未修正） | 不合格を検出し欠陥IDを採番した時点 |
| 修正済 | 修正が実施された状態（未検証） | 修正コミット/タグが作成された時点 |
| 検証済 | リテスト/回帰で修正が確認できた状態 | 関連テストケースの回帰が合格した時点 |

※運用上必要になった場合のみ、例外状態（保留、再現不可、取消 等）を追加してよい。ただし追加した場合は本表を更新する。

### 5.2 テスト種別（test_results_record.csv）
実行記録の「テスト種別」は以下のいずれかで記録する。

| 種別 | 意味 | 例 |
| --- | --- | --- |
| 新規 | 初回実行（初めて記録する実行） | 初回のTC-002実行 |
| 回帰 | 修正後に再確認する実行 | DEFECT-001修正後にTC-002/003を再実行 |
| 再実行 | 環境/データ不備などでやり直した実行（修正とは無関係） | 実行不可→データ投入後に再実行 |
| 探索 | チャーター等に基づく探索的テスト | 想定外入力・URL直叩きの追加確認 |
| スモーク | 起動・主要導線の最短確認 | ログイン→一覧→詳細→作成が通るか |

### 5.3 重要度（Severity）と優先度（Priority）
欠陥ログの「重要度」「優先度」は以下の定義に統一する。

#### 重要度（影響の大きさ）
| 重要度 | 定義（目安） |
| --- | --- |
| Critical | 情報漏えい/権限逸脱、データ破壊、主要機能が成立しない等、致命的 |
| High | 主要機能の重要な制約に違反、回避困難、業務影響が大きい |
| Medium | 代替手段あり、限定条件で発生、業務影響は中程度 |
| Low | 軽微な不具合（表示/文言/体裁など）、業務影響が小さい |

#### 優先度（修正の急ぎ度）
| 優先度 | 定義（目安） |
| --- | --- |
| High | 直ちに修正が必要（次のテストサイクル前に必須） |
| Medium | 早めに修正したい（計画内で対応） |
| Low | 後回しでも許容（MVPでは受容/保留の可能性あり） |

※重要度と優先度は必ずしも一致しない（例：Criticalでも実験用欠陥で優先度を下げる等）。ただしその場合は欠陥ログの備考に理由を記録する。

### 5.4 テストケースの優先度（P1/P2）
テストケースの「優先順位」は以下に統一する。

| 優先順位 | 定義（目安） |
| --- | --- |
| P1 | 最優先リスク（認可/状態遷移/整合性）に直結。完了基準に関わる |
| P2 | 入力検証、検索/フィルタ等。P1完了後に実行する |

### 5.5 証跡の記録方法
- 証跡はリポジトリルートからの相対パスで記録する（例：`evidence/screenshots/...`）。
- 1セルに複数証跡を記録する場合は `;` 区切りで列挙する。
- 証跡ファイル名は原則としてテスト結果ID（TR）を主キーとし、複数ある場合は連番を付ける（例：`TR-0002_01.png`）。

### 5.6 ID採番のルール（REQ / TCND / TC / TR / DEFECT）
本プロジェクトで扱うIDは、以下の命名規則に統一する。

- 要件ID（Requirements）：`REQ-001` から連番（正本：`requirements/requirements.csv`）
- テスト条件ID（Test Conditions）：`TCND-001` から連番（正本：`docs/20_test_conditions.md`）
- テストケースID（Test Cases）：`TC-001` から連番（正本：`testcases/testcases.csv`）
- リスクID(Risk)：`R-XX`から連番（正本：`docs/10_test_plan.md`）
- テスト結果ID（Test Results）：`TR-0001` から連番（正本：`results/test_results.csv`）
- 欠陥ID（Defects）：`DEFECT-001` から連番（正本：`defects/defect_log.csv`）

運用ルール：
- 連番は欠番があってもよいが、**再利用しない**
- 参照は原則として上位→下位（例：`REQ-001 → TCND-013 → TC-020`）で追跡できること
