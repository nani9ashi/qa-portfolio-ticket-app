# テスト設計 - チケット管理アプリ

- 文書ID：TD-TICKET-001
- 版：v0.1
- 最終更新日：2025-12-31
- 作成者：Shintaro
- 対象：チケット管理アプリ
- 関連：
  - テスト計画：`10_test_plan.md`
  - テスト条件：`20_test_conditions.md`
  - テストケース：`../testcases/testcases.csv`

---

## 1. 目的

テストベースから、優先度付きのテスト条件を導き、代表的なテストケースへ落とし込む設計方針を示す。

## 2. テスト技法（採用）

- 同値分割・境界値分析：タイトル/本文/期限/添付サイズ
- 状態遷移テスト：ステータス遷移の許可/禁止
- デシジョンテーブル：ロール×操作（参照/更新/割当）
- 探索的テスト：チャーターに基づき追加のテスト条件を抽出

## 3. モデル

### 3.1 状態遷移モデル（State Transition）

| From \ To | In Progress | Pending | Resolved | Closed |
| --- | --- | --- | --- | --- |
| Open | ○ | ○ | × | × |
| In Progress | × | ○ | ○ | × |
| Pending | ○ | × | ○ | × |
| Resolved | × | × | × | ○ |
| Closed | × | × | × | × |

期待：×の遷移はUI/直接操作のいずれでも拒否される。

### 3.2 権限マトリクス（Decision Table）

| 操作 | 依頼者 | 担当者 | 管理者 |
| --- | --- | --- | --- |
| チケット作成 | ○ | ○ | ○ |
| 自分のチケット参照 | ○ | ○ | ○ |
| 他人のチケット参照 | × | ○ | ○ |
| ステータス変更 | × | ○ | ○ |
| コメント追加 | ○ | ○ | ○ |
| 担当割当（Assign） | × | × | ○ |
| ユーザ/設定管理 | × | × | ○ |

## 4. カバレッジアイテム（Coverage Items）

本ポートフォリオでは、少なくとも以下をカバレッジアイテムとして扱う。

- ロール：依頼者 / 担当者 / 管理者
- ステータス：Open / In Progress / Pending / Resolved / Closed
- 遷移：許可遷移（○）と禁止遷移（×）
- 入力制約：必須、文字数境界、期限、添付（サイズ/形式）
- 一覧・検索：キーワード、状態フィルタ、ソート

## 5. テストチャーター（Test Charters）

### チャーター1（30分）

目的：権限と直接アクセスの抜けを見つける

範囲：一覧/詳細/更新（URL直叩き、ID変更、ボタン表示）

着眼点：参照・更新・割当がロールどおりか、エラー表示の分かりやすさ

### チャーター2（30分）

目的：状態遷移と履歴の破綻を見つける

範囲：遷移操作、コメント、履歴表示

着眼点：禁止遷移、二重クリック、戻る/更新、履歴の時系列

## 6. テストデータ要件（Test Data Requirements）

- アカウント：依頼者/担当者/管理者を各1
- チケット：各ステータスのチケットを数件ずつ（検索用にカテゴリや期限を変える）
- 期限：未来日/当日/過去日
- 添付：小サイズ/上限超過、許可形式/不許可形式

## 7. テスト環境要件（Test Environment Requirements）

- ローカル起動：Docker Compose（再現性確保）
- ブラウザ：Chrome / Edge（任意でFirefox）
- 証跡：スクリーンショット、必要に応じて短い録画