# テスト完了レポート - チケット管理アプリ

- 文書ID：TCR-TICKET-001  
- 版：v0.2  
- ステータス：Draft  
- 最終更新日：2026-02-12  
- 作成者：仁後慎太郎  
- 対象：チケット管理アプリ（Web, Django + SQLite）  
- 関連：  
  - テスト計画：`../docs/10_test_plan.md`  
  - テスト条件：`../docs/20_test_conditions.md`  
  - トレーサビリティ：`../docs/70_requirements_test_traceability.md`  
  - テストケース：`../testcases/testcases.csv`  
  - テスト結果：`../results/test_results.csv`  
  - 欠陥ログ：`../defects/defect_log.csv`  

---

## 1. サマリ

本レポートは、チケット管理アプリに対するテスト実行結果の概要、主要欠陥、残存リスク、次アクションをまとめる。

- 対象：チケット管理アプリ（Web）
- 対象期間：**2026-01-13 〜 2026-02-12**
- 実行環境：**Win11 / Chrome**
- 対象ビルド（実行記録ベース）：
  - `app-defect-idor`（意図的欠陥の再現）
  - `app-v0.3`
  - `app-v0.3.1`（最終実行ビルド）

結論：**最終ビルド（app-v0.3.1）において、実行したテストはすべて合格。重大欠陥は残存していない（欠陥ログ上、Critical/Highが未解決で残っていない）。**

---

## 2. 実施範囲

### 2.1 実施した主要領域
- 権限・認可（参照/更新、直接アクセス/直接操作の基本確認）
- ステータス遷移（許可遷移・禁止遷移）
- 入力検証（必須、境界値、期限、添付のサイズ/形式）
- 一覧・検索・フィルタ
- コメント・履歴（監査ログの表示および種別識別）

### 2.2 非対象（本レポートでは扱わない）
- 負荷・性能（定量評価）
- 専門的な脆弱性診断（侵入テスト等）
- 自動化（E2E/CIは将来拡張）

---

## 3. 結果概要（定量）

### 3.1 ユニークテストケースの消化状況
- 実行（少なくとも1回）：**44件（TC-001〜TC-044）**
- 未実行：**0件**
- Blocked（実行不可）：**0件**（記録上なし）

### 3.2 実行回数と結果（再実行含む）
- 総実行回数：**46回**
- 合格：**44回**
- 不合格：**2回**
- 合格率（総実行）：**95.7%（44/46）**

### 3.3 ビルド別の実行状況（参考）
- `app-defect-idor`：2回（不合格2：意図的欠陥再現）
- `app-v0.3`：17回（回帰2を含む）
- `app-v0.3.1`：27回（合格27 / 不合格0）

---

## 4. 主要な欠陥と状況（定性）

欠陥ログ（`../defects/defect_log.csv`）に基づき、影響が大きい欠陥を記載する。

- **DEFECT-001：依頼者が他人チケット詳細を参照できる（Critical / High）**  
  - 検出：2026-01-13（`app-defect-idor`、TC-002/TC-003 不合格）  
  - 回帰確認：2026-01-19（`app-v0.3`、TC-002/TC-003 合格）  
  - 状態：**検証済**  
  - 備考：意図的欠陥（IDOR=ON）として再現し、修正版で閲覧拒否（forbidden）を確認した。

---

## 5. カバレッジと残存課題（要件ベース）

要件カバレッジはトレーサビリティ（`../docs/70_requirements_test_traceability.md`）を一次ソースとする。

- カバー：30件  
- 一部カバー：7件  
- 未カバー：5件  

未カバー要件：`RQ-014; RQ-024; RQ-028; RQ-031; RQ-032`  
一部カバー要件：`RQ-002; RQ-004; RQ-005; RQ-006; RQ-008; RQ-027; RQ-029`

---

## 6. 残存リスク

現時点の残存リスクは、主に「未カバー/一部カバー要件」に起因する。

- **権限・運用差分の残存**：ロール前提のズレ（例：`RQ-006 due_date`）が残ると、仕様と運用の乖離が発生する可能性がある。
- **監査ログの“全操作”の定義不足**：`RQ-002` の範囲定義が曖昧なままだと、追跡性が要件どおりか断言できない。
- **更新の定義の曖昧さ**：`RQ-029` の「更新」が例えばステータス変更＋コメント追加など、具体的に何を指すか固定しないと、運用ルールがぶれる。

---

## 7. 得られた教訓

- 認可はUI確認だけでは不十分で、**直接アクセス/直接操作**の観点を含めると欠陥検出力が上がる（DEFECT-001）。
- テスト結果（実行記録）と欠陥ログを分離し、**証跡リンクを一貫させる**と、後から追跡しやすい。
- トレーサビリティ（70）で“カバー/一部カバー/未カバー”を**分類をして管理**すると、次の打ち手が明確になる。

---

## 8. 次のアクション

### 8.1 追加でカバー（A）
- [ ] `RQ-024` Adminのコメント追加（TCND-038 / TC追加）
- [ ] `RQ-028` Requesterの期限変更不可（TCND-039 / TC追加）
- [ ] `RQ-032` Adminの更新権限（TCND-042 / TC追加）
- [ ] `RQ-004` body境界値（4000ちょうど/4001）（TCND-016 / TC追加）
- [ ] `RQ-008` 複数添付拒否（TCND-031 / TC追加）
- [ ] `RQ-005` status初期値Open・列挙外拒否（TCND-044 / TC追加）

### 8.2 スコープ判断（B）
- [ ] `RQ-014` Admin作成（Should）をスコープ内にするか決める
- [ ] `RQ-031` Agent期限変更不可（Should）を採用するか決める

### 8.3 要件/運用整理（C）
- [ ] `RQ-006` due_dateの入力主体（Requester/Admin）を要件・実装・TCで整合させる
- [ ] `RQ-002` “全操作”の範囲（操作一覧）を定義し、不足分を追加する
- [ ] `RQ-029` “更新”の定義（コメント含む）を固定し、非担当時の期待挙動を確定する

---

## 補足：ビルドをまたいだテスト実行について

本テストは、`app-v0.3` および `app-v0.3.1` をまたいで実施した。  
ただし `v0.3.1` はセキュリティ関連の軽微な修正を目的としたマイナーアップデートであり、
仕様・画面・主要機能の変更はない前提で運用した。

そのため、テスト実行は **ビルド単位で厳密に分割せず**、同一リリース系列として継続実施した。  
一方で、結果の追跡性を担保するため、テスト結果CSVでは各実行記録にビルド番号（`app-v0.3` / `app-v0.3.1`）を明記し、
必要な回帰確認（例：DEFECT-001修正確認）はビルド更新後にも実施した。